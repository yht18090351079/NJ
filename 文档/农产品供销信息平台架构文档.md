# 农产品供销信息平台架构文档

## 用户层

### 小程序端（移动优先）

- 登录/注册

- 首页模块

	- **Banner轮播区**

		- 广告位

	- **政策快报**

		- 三级分类导航

			- 政府补贴

			- 市场预警

			- 技术指导

	- 推荐

		- 瀑布流（5个）

			- 图片

			- 品种

			- 价格

			- 地址

			- 脱敏联系方式

			- 简介

			- ...

			- 交互

				- 点击进入详情

					- 所有介绍

					- 获得联系方式

						- 微信

						- 电话

		- 页卡

	- **导航Tabs**

		- 交互设计

			- 首页（默认定位）

			- 供应大厅（带角标提醒）

			- 发布

				- 多步骤表单

					- 1. 基础信息（名称/品类/图片）

					- 2. 详情描述（富文本编辑器）

				- 智能辅助

					- 同类商品价格参考

					- 敏感词实时检测

			- 需求大厅（红点新消息提示）

			- 个人中心（入口埋点）

- 供应大厅

	- 基础筛选

		- 品类树形选择

		- 价格阶梯（0-500/500-1000自定义）

		- 地理位置选择（支持获取定位）

		- 规模（区间）

	- 瀑布流

		- 求购信息列表

			- 图片

			- 品种

			- 价格

			- 地址

			- 脱敏联系方式

			- 简介

			- 交互

				- 点击进入详情

					- 所有介绍

					- 获得联系方式

						- 微信

						- 电话

- 需求大厅

	- 快速筛选

		- 采购规模（区间）

		- 品类树形选择

		- 价格阶梯（0-500/500-1000自定义）

		- 地理位置选择（支持获取定位）

	- 瀑布流

		- 求购信息列表

			- 图片

			- 品种

			- 价格

			- 地址

			- 脱敏联系方式

			- 简介

			- 交互

				- 点击进入详情

					- 所有介绍

					- 获得联系方式

						- 微信

						- 电话

- 个人中心

	- 个人信息管理

	- 发布信息管理

### Web应用端（响应式）

- 登录/注册

- 首页模块

- ...同小程序

- 在小程序基础上增加对比功能（类似京东对比）

### Web管理端（PC）

- 风控中枢

	- 第三方管理

- 基础管理

- 用户管理

- 信息管理

	- 供应信息

	- 需求信息

- 字典管理

	- 区域

	- 产品

## 服务层（功能支撑）

### 核心微服务群| 服务名称     | 技术栈            | QPS  | SLA    |
| ------------ | ----------------- | ---- | ------ |
| **用户服务** | Spring Security   | 3000 | 99.95% |
| **搜索服务** | Elasticsearch 8.x | 5000 | 99.99% |
| **支付服务** | Alipay SDK        | 1500 | 99.9%  |

### 关键接口规范``` json
// 供应查询API示例
{
  "path": "/api/v1/supplies",
  "method": "POST",
  "params": {
    "geo": {"lat": 31.2304, "lng": 121.4737, "radius_km": 50},
    "price_range": [10, 100],
    "sort_by": "distance"
  }
}
```


##     用户信息表（user_info）

###        用户名

-                 加密方式：AES-256

-                 安全要求：KMS密钥轮换

### 密码

-                 算法：SHA-256加盐

-                 存储：独立盐值库

### 手机号

###         角色管理

-             role

-                 枚举值：farmer/buyer/auditor/admin

### 地址

-                 用途：默认展示区域

## 农产品信息表

### 产品编码

-                 类型：BIGINT UNSIGNED

-                 说明：唯一产品ID（自增主键）

### 产品名

-                 类型：VARCHAR(100)

-                 约束：非空

-                 示例：山东红富士苹果

###         重量

-                 类型：VARCHAR(20)

-                 默认值：斤

-                 可选值：公斤/吨/箱

###          图

-                 类型：JSON

-                 规则：最多9张图

### 视频

###         状态

-                 枚举值：1-上架 2-下架

###          标签

-                 说明：有机/绿色认证

### ...

