<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发布信息 - 农产品供销信息平台</title>
    <!-- 网站描述 -->
    <meta name="description" content="农产品供求发布，快速发布农产品供应和采购需求">
    <!-- 关键词 -->
    <meta name="keywords" content="农产品,供应,蔬菜,水果,粮油,发布,采购,供求">
    <!-- 主题色 -->
    <meta name="theme-color" content="#2E8B57">

    <!-- 引入字体图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- 引入自定义样式 -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- 预加载关键资源 -->
    <link rel="preload" href="https://img.icons8.com/color/96/null/natural-food.png" as="image">
    <link rel="preload" href="css/styles.css" as="style">
    <link rel="preload" href="js/main.js" as="script">
</head>

<body>
    <!-- Web应用布局 -->
    <div class="web-layout">
        <!-- 顶部导航栏 -->
        <header class="web-header">
            <!-- 水平导航菜单 - 包含logo和用户图标 -->
            <nav class="horizontal-nav">
                <div class="horizontal-nav-menu">
                    <!-- 添加logo到导航栏 -->
                    <div class="logo">
                        <img src="https://img.icons8.com/color/96/null/natural-food.png" alt="农产品供销信息平台">
                        <span class="logo-text">农产品供销平台</span>
                    </div>

                    <!-- 中间导航链接 -->
                    <div class="nav-links">
                        <div class="horizontal-nav-item">
                            <a href="index.html" class="horizontal-nav-link">
                                <i class="fas fa-home"></i>
                                <span>首页</span>
                            </a>
                        </div>
                        <div class="horizontal-nav-item">
                            <a href="javascript:void(0)" class="horizontal-nav-link" id="trade-hall-link">
                                <i class="fas fa-building"></i>
                                <span>交易大厅</span>
                            </a>
                        </div>
                        <div class="horizontal-nav-item">
                            <a href="publish.html" class="horizontal-nav-link active">
                                <i class="fas fa-edit"></i>
                                <span>发布信息</span>
                            </a>
                        </div>

                        <div class="nav-group-divider"></div>

                        <div class="horizontal-nav-item">
                            <a href="policy.html" class="horizontal-nav-link">
                                <i class="fas fa-newspaper"></i>
                                <span>消息快报</span>
                            </a>
                        </div>
                    </div>

                    <!-- 添加用户图标到导航栏 -->
                    <div class="header-icons">
                        <div class="role-switch" onclick="showRoleModal(); return false;">
                            <i class="fas fa-exchange-alt"></i>
                            <span id="currentRole"
                                onclick="showRoleModal(); event.stopPropagation(); return false;">采购商</span>
                        </div>
                        <a href="user.html" class="avatar-wrapper">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="用户头像">
                        </a>
                    </div>
                </div>
            </nav>

            <!-- 顶部区域 - 仅保留搜索 -->
            <div class="header-top">
                <!-- 移动端显示的logo -->
                <div class="logo mobile-logo">
                    <img src="https://img.icons8.com/color/96/null/natural-food.png" alt="农产品供销信息平台">
                    <span class="logo-text">农产品供销平台</span>
                </div>

                <div class="search-wrapper">
                    <form class="search-form">
                        <i class="fas fa-search search-icon"></i>
                        <input type="search" class="search-input" placeholder="搜索农产品、种类、地区...">
                        <button type="button" class="advanced-search-toggle">
                            <i class="fas fa-sliders-h"></i>
                        </button>
                    </form>
                </div>

                <!-- 移动端菜单按钮 -->
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <!-- 高级搜索面板 -->
            <div class="advanced-search-panel">
                <div class="advanced-search-content">
                    <div class="search-row">
                        <label>产品类别</label>
                        <select>
                            <option value="">全部类别</option>
                            <option value="fruits">水果</option>
                            <option value="vegetables">蔬菜</option>
                            <option value="grains">粮食</option>
                            <option value="others">其他</option>
                        </select>
                    </div>
                    <div class="search-row">
                        <label>价格区间</label>
                        <div class="price-range">
                            <input type="number" placeholder="最低价">
                            <span>-</span>
                            <input type="number" placeholder="最高价">
                        </div>
                    </div>
                    <div class="search-row">
                        <label>产地</label>
                        <select>
                            <option value="">全部地区</option>
                            <option value="north">华北</option>
                            <option value="east">华东</option>
                            <option value="south">华南</option>
                            <option value="west">西部</option>
                            <option value="northeast">东北</option>
                        </select>
                    </div>
                    <div class="search-actions">
                        <button type="reset" class="btn-reset">重置</button>
                        <button type="submit" class="btn-search">搜索</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- 移动端侧边栏背景蒙层 -->
        <div class="sidebar-backdrop"></div>

        <!-- 主内容区 -->
        <main class="web-main">
            <div class="web-content">
                <!-- 面包屑导航 -->
                <div class="breadcrumb">
                    <div class="breadcrumb-item">
                        <a href="index.html">首页</a>
                    </div>
                    <div class="breadcrumb-item">
                        <a href="publish.html">发布信息</a>
                    </div>
                </div>

                <!-- 发布信息面板 -->
                <section class="publish-section">
                    <div class="publish-header">
                        <h2 class="publish-title">发布信息</h2>
                        <p class="publish-description" id="publish-description">根据您的角色，您可以发布相应的信息</p>
                    </div>

                    <!-- 发布选项容器 -->
                    <div class="publish-options-container">
                        <!-- 供应信息发布卡片 - 仅供应商可见 -->
                        <div class="publish-card" id="supply-card" style="display: none;">
                            <div class="publish-card-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <div class="publish-card-content">
                                <h3 class="publish-card-title">发布供应信息</h3>
                                <p class="publish-card-desc">发布您的农产品供应信息，让更多采购商了解您的产品</p>
                                <ul class="publish-card-features">
                                    <li><i class="fas fa-check"></i> 精准匹配采购需求</li>
                                    <li><i class="fas fa-check"></i> 扩大产品销售渠道</li>
                                    <li><i class="fas fa-check"></i> 提高农产品曝光率</li>
                                </ul>
                                <a href="publish-supply.html" class="btn-primary publish-btn">
                                    <i class="fas fa-edit"></i>
                                    发布供应信息
                                </a>
                            </div>
                        </div>

                        <!-- 需求信息发布卡片 - 仅采购商可见 -->
                        <div class="publish-card" id="demand-card">
                            <div class="publish-card-icon">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="publish-card-content">
                                <h3 class="publish-card-title">发布采购需求</h3>
                                <p class="publish-card-desc">发布您的农产品采购需求，快速找到满足您需求的供应商</p>
                                <ul class="publish-card-features">
                                    <li><i class="fas fa-check"></i> 广泛触达供应商</li>
                                    <li><i class="fas fa-check"></i> 提高采购效率</li>
                                    <li><i class="fas fa-check"></i> 多方比价，获取优质产品</li>
                                </ul>
                                <a href="publish-demand.html" class="btn-primary publish-btn">
                                    <i class="fas fa-edit"></i>
                                    发布采购需求
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- 发布历史记录 -->
                    <div class="publish-history">
                        <div class="history-header">
                            <h3>我的发布历史</h3>
                        </div>

                        <div class="history-status-filter">
                            <button class="btn-status active" data-status="all">全部状态</button>
                            <button class="btn-status" data-status="active">展示中</button>
                            <button class="btn-status" data-status="pending">审核中</button>
                            <button class="btn-status" data-status="delisted">已下架</button>
                        </div>

                        <!-- 历史记录列表 -->
                        <div class="history-list">
                            <!-- 供应商角色历史记录 -->
                            <div class="history-item" data-type="supply" data-status="active">
                                <div class="history-item-header">
                                    <div class="history-item-title">优质红富士苹果供应</div>
                                    <div class="history-item-status active">展示中</div>
                                </div>
                                <div class="history-item-content">
                                    <div class="history-item-info">
                                        <div><i class="fas fa-tag"></i> 单价: ¥5.5/斤</div>
                                        <div><i class="fas fa-box"></i> 供应量: 2000斤</div>
                                        <div><i class="fas fa-map-marker-alt"></i> 山东-烟台</div>
                                    </div>
                                    <div class="history-item-date">
                                        <div>发布时间: 2023-09-15</div>
                                        <div>到期时间: 2023-10-15</div>
                                    </div>
                                </div>
                                <div class="history-item-actions">
                                    <button class="btn-action edit"><i class="fas fa-edit"></i> 编辑</button>
                                    <button class="btn-action delist"><i class="fas fa-arrow-down"></i> 下架</button>
                                    <button class="btn-action delete"><i class="fas fa-trash-alt"></i> 删除</button>
                                </div>
                            </div>

                            <div class="history-item" data-type="supply" data-status="pending">
                                <div class="history-item-header">
                                    <div class="history-item-title">有机黄瓜批发</div>
                                    <div class="history-item-status pending">审核中</div>
                                </div>
                                <div class="history-item-content">
                                    <div class="history-item-info">
                                        <div><i class="fas fa-tag"></i> 单价: ¥3.8/斤</div>
                                        <div><i class="fas fa-box"></i> 供应量: 500斤</div>
                                        <div><i class="fas fa-map-marker-alt"></i> 山东-寿光</div>
                                    </div>
                                    <div class="history-item-date">
                                        <div>发布时间: 2023-09-20</div>
                                        <div>预计审核完成: 2023-09-22</div>
                                    </div>
                                </div>
                                <div class="history-item-actions">
                                    <button class="btn-action edit"><i class="fas fa-edit"></i> 编辑</button>
                                    <button class="btn-action delete"><i class="fas fa-trash-alt"></i> 删除</button>
                                </div>
                            </div>

                            <!-- 供应项 - 已下架 -->
                            <div class="history-item" data-type="supply" data-status="delisted">
                                <div class="history-item-header">
                                    <div class="history-item-title">特色有机蔬菜组合</div>
                                    <div class="history-item-status delisted">已下架</div>
                                </div>
                                <div class="history-item-content">
                                    <div class="history-item-info">
                                        <div><i class="fas fa-tag"></i> 单价: ¥88/箱</div>
                                        <div><i class="fas fa-box"></i> 供应量: 200箱</div>
                                        <div><i class="fas fa-map-marker-alt"></i> 浙江-杭州</div>
                                    </div>
                                    <div class="history-item-date">
                                        <div>发布时间: 2023-09-10</div>
                                        <div>下架时间: 2023-09-12</div>
                                    </div>
                                </div>
                                <div class="history-item-actions">
                                    <button class="btn-action edit"><i class="fas fa-edit"></i> 编辑</button>
                                    <button class="btn-action list"><i class="fas fa-arrow-up"></i> 上架</button>
                                    <button class="btn-action delete"><i class="fas fa-trash-alt"></i> 删除</button>
                                </div>
                            </div>

                            <!-- 采购商角色历史记录 -->
                            <div class="history-item" data-type="demand" data-status="active">
                                <div class="history-item-header">
                                    <div class="history-item-title">采购优质稻米</div>
                                    <div class="history-item-status active">展示中</div>
                                </div>
                                <div class="history-item-content">
                                    <div class="history-item-info">
                                        <div><i class="fas fa-tag"></i> 预算: ¥4-6/斤</div>
                                        <div><i class="fas fa-box"></i> 需求量: 5000斤</div>
                                        <div><i class="fas fa-map-marker-alt"></i> 交货地: 北京</div>
                                    </div>
                                    <div class="history-item-date">
                                        <div>发布时间: 2023-09-10</div>
                                        <div>截止时间: 2023-10-10</div>
                                    </div>
                                </div>
                                <div class="history-item-actions">
                                    <button class="btn-action edit"><i class="fas fa-edit"></i> 编辑</button>
                                    <button class="btn-action delist"><i class="fas fa-arrow-down"></i> 下架</button>
                                    <button class="btn-action delete"><i class="fas fa-trash-alt"></i> 删除</button>
                                </div>
                            </div>

                            <div class="history-item" data-type="demand" data-status="delisted">
                                <div class="history-item-header">
                                    <div class="history-item-title">采购新鲜西红柿</div>
                                    <div class="history-item-status delisted">已下架</div>
                                </div>
                                <div class="history-item-content">
                                    <div class="history-item-info">
                                        <div><i class="fas fa-tag"></i> 预算: ¥2-3/斤</div>
                                        <div><i class="fas fa-box"></i> 需求量: 1000斤</div>
                                        <div><i class="fas fa-map-marker-alt"></i> 交货地: 上海</div>
                                    </div>
                                    <div class="history-item-date">
                                        <div>发布时间: 2023-08-01</div>
                                        <div>下架时间: 2023-09-01</div>
                                    </div>
                                </div>
                                <div class="history-item-actions">
                                    <button class="btn-action edit"><i class="fas fa-edit"></i> 编辑</button>
                                    <button class="btn-action list"><i class="fas fa-arrow-up"></i> 上架</button>
                                    <button class="btn-action delete"><i class="fas fa-trash-alt"></i> 删除</button>
                                </div>
                            </div>

                            <div class="history-item" data-type="demand" data-status="pending">
                                <div class="history-item-header">
                                    <div class="history-item-title">采购有机蔬菜</div>
                                    <div class="history-item-status pending">审核中</div>
                                </div>
                                <div class="history-item-content">
                                    <div class="history-item-info">
                                        <div><i class="fas fa-tag"></i> 预算: ¥15-25/箱</div>
                                        <div><i class="fas fa-box"></i> 需求量: 100箱/周</div>
                                        <div><i class="fas fa-map-marker-alt"></i> 交货地: 广州</div>
                                    </div>
                                    <div class="history-item-date">
                                        <div>发布时间: 2023-09-18</div>
                                        <div>预计审核完成: 2023-09-20</div>
                                    </div>
                                </div>
                                <div class="history-item-actions">
                                    <button class="btn-action edit"><i class="fas fa-edit"></i> 编辑</button>
                                    <button class="btn-action delete"><i class="fas fa-trash-alt"></i> 删除</button>
                                </div>
                            </div>
                        </div>

                        <!-- 分页控件 -->
                        <div class="pagination">
                            <button class="pagination-btn prev"><i class="fas fa-chevron-left"></i></button>
                            <div class="pagination-pages">
                                <span class="current-page">1</span> / <span class="total-pages">2</span>
                            </div>
                            <button class="pagination-btn next"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- 页脚区域 -->
        <div data-component="footer"></div>

        <!-- 回到顶部按钮 -->
        <button class="back-to-top">
            <i class="fas fa-arrow-up"></i>
        </button>

        <!-- 移动端导航菜单 -->
        <nav class="mobile-bottom-nav">
            <a href="index.html" class="mobile-nav-item">
                <i class="fas fa-home"></i>
                <span>首页</span>
            </a>
            <a href="supply.html" class="mobile-nav-item">
                <i class="fas fa-store"></i>
                <span>供应</span>
            </a>
            <a href="publish.html" class="mobile-nav-item active">
                <div class="mobile-publish-btn">
                    <i class="fas fa-plus"></i>
                </div>
                <span>发布</span>
            </a>
            <a href="demand.html" class="mobile-nav-item">
                <i class="fas fa-shopping-cart"></i>
                <span>需求</span>
            </a>
            <a href="user.html" class="mobile-nav-item">
                <i class="fas fa-user"></i>
                <span>我的</span>
            </a>
        </nav>

        <!-- 角色切换模态框 -->
        <div class="role-modal" id="roleModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>切换角色</h3>
                    <button type="button" class="close-btn" id="roleModalCloseBtn" onclick="closeRoleModal()"><i
                            class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="role-options">
                        <div class="role-option" data-role="采购商" onclick="selectRoleOption(this)">
                            <i class="fas fa-shopping-cart"></i>
                            <div class="role-option-info">
                                <h4>采购商</h4>
                                <p>发布农产品采购需求</p>
                            </div>
                        </div>
                        <div class="role-option" data-role="供应商" onclick="selectRoleOption(this)">
                            <i class="fas fa-store"></i>
                            <div class="role-option-info">
                                <h4>供应商</h4>
                                <p>发布农产品供应信息</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-confirm" id="roleModalConfirmBtn"
                        onclick="confirmRoleChange()">确认切换</button>
                </div>
            </div>
        </div>

        <!-- 上架确认模态框 -->
        <div class="confirm-modal" id="listConfirmModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>确认上架</h3>
                    <button class="close-btn"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <p class="confirm-message">确定要上架"<span class="item-title"></span>"吗？</p>
                    <p class="confirm-hint">上架后需要等待审核。</p>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary cancel-btn">取消</button>
                    <button class="btn-primary confirm-btn">确认上架</button>
                </div>
            </div>
        </div>

        <!-- 下架确认模态框 -->
        <div class="confirm-modal" id="delistConfirmModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>确认下架</h3>
                    <button class="close-btn"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <p class="confirm-message">确定要下架"<span class="item-title"></span>"吗？</p>
                    <p class="confirm-hint">下架后将不会在大厅展示。</p>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary cancel-btn">取消</button>
                    <button class="btn-primary confirm-btn">确认下架</button>
                </div>
            </div>
        </div>

        <!-- 删除确认模态框 -->
        <div class="confirm-modal" id="deleteConfirmModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>确认删除</h3>
                    <button class="close-btn"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <p class="confirm-message">确定要删除"<span class="item-title"></span>"吗？</p>
                    <p class="confirm-hint">删除后将无法恢复，请谨慎操作。</p>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary cancel-btn">取消</button>
                    <button class="btn-primary confirm-btn">确认删除</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入JavaScript文件 -->
    <script src="js/main.js"></script>
    <script src="js/components.js"></script>
    <script src="js/role-switch.js"></script>
    <script src="js/trade-hall.js"></script>
    <script src="js/publish.js"></script>
    <!-- 引入批注组件 -->
    <script src="../组件/annotation.js"></script>

    <script>
        // 添加调试工具
        document.addEventListener('DOMContentLoaded', function () {
            // 创建调试按钮
            const debugBtn = document.createElement('button');
            debugBtn.textContent = '调试角色切换';
            debugBtn.style.position = 'fixed';
            debugBtn.style.bottom = '80px';
            debugBtn.style.right = '20px';
            debugBtn.style.zIndex = '999';
            debugBtn.style.padding = '10px';
            debugBtn.style.background = '#ff5722';
            debugBtn.style.color = 'white';
            debugBtn.style.border = 'none';
            debugBtn.style.borderRadius = '4px';
            debugBtn.style.display = 'none'; // 默认隐藏

            // 仅在开发环境中显示（按 D 键切换显示）
            document.addEventListener('keydown', function (e) {
                if (e.key === 'd' || e.key === 'D') {
                    debugBtn.style.display = debugBtn.style.display === 'none' ? 'block' : 'none';
                }
            });

            debugBtn.addEventListener('click', function () {
                console.log('调试角色切换按钮被点击');
                // 检查关键元素
                const roleModal = document.getElementById('roleModal');
                const currentRole = document.getElementById('currentRole');
                const roleOptions = document.querySelectorAll('.role-option');

                console.log('角色模态框:', roleModal);
                console.log('当前角色元素:', currentRole);
                console.log('角色选项数量:', roleOptions.length);

                // 测试显示模态框
                showRoleModal();
            });

            document.body.appendChild(debugBtn);
        });
    </script>
</body>

</html>