<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>个人中心 - 农产品供销信息平台</title>
    <!-- 引入字体图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- 引入基础样式 -->
    <link rel="stylesheet" href="../app/css/style.css">
    <!-- 引入Web端通用样式 -->
    <link rel="stylesheet" href="css/web-style.css">
    <!-- 引入个人中心特有样式 -->
    <link rel="stylesheet" href="css/user-web.css">
    <!-- 页面描述 -->
    <meta name="description" content="农产品供销信息平台个人中心，管理您的供需信息">
    <!-- 主题色 -->
    <meta name="theme-color" content="#2E8B57">
</head>

<body>
    <div class="app-container">
        <!-- Web端顶部导航栏 -->
        <header class="web-header">
            <div class="web-header-container">
                <!-- 左侧Logo -->
                <div class="web-logo">
                    <img src="images/logo.png" alt="农产品供销信息平台" class="logo-image">
                    <span class="logo-text">农产品供销信息平台</span>
                </div>

                <!-- 中间导航链接 -->
                <nav class="web-nav">
                    <a href="index.html" class="web-nav-link" data-page="index">首页</a>
                    <a href="supply.html" class="web-nav-link" data-page="supply">供应大厅</a>
                    <a href="demand.html" class="web-nav-link" data-page="demand">需求大厅</a>
                    <a href="publish.html" class="web-nav-link" data-page="publish">发布信息</a>
                    <a href="user.html" class="web-nav-link active" data-page="user">个人中心</a>
                </nav>

                <!-- 右侧用户区域 -->
                <div class="web-user-area">
                    <a href="login.html" class="login-btn" id="loginBtn">登录</a>
                    <a href="user.html" class="user-avatar-mini" id="userAvatarMini" style="display: none;">
                        <img src="../app/images/default-avatar.png" alt="用户头像" id="userAvatarImg">
                    </a>
                </div>
            </div>
        </header>

        <!-- 侧边栏菜单 -->
        <aside class="sidebar">
            <div class="sidebar-container">
                <div class="sidebar-header">
                    <img src="images/logo.png" alt="Logo" class="sidebar-logo">
                    <span class="sidebar-title">农产品供销平台</span>
                </div>

                <nav class="sidebar-menu">
                    <a href="index.html" class="sidebar-menu-item" data-page="index">
                        <i class="fas fa-home"></i>首页
                    </a>
                    <a href="supply.html" class="sidebar-menu-item" data-page="supply">
                        <i class="fas fa-shopping-basket"></i>供应大厅
                    </a>
                    <a href="demand.html" class="sidebar-menu-item" data-page="demand">
                        <i class="fas fa-clipboard-list"></i>需求大厅
                    </a>
                    <a href="publish.html" class="sidebar-menu-item" data-page="publish">
                        <i class="fas fa-plus-circle"></i>发布信息
                    </a>
                    <a href="user.html" class="sidebar-menu-item active" data-page="user">
                        <i class="fas fa-user"></i>个人中心
                    </a>
                </nav>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 游客提示条 -->
            <div class="guest-notice" id="guestNotice" style="display: none;">
                <div class="guest-notice-content">
                    <i class="fas fa-user-clock"></i>
                    <span>您正在以游客身份浏览，部分功能受限</span>
                </div>
                <a href="register.html" class="register-now-btn">立即注册</a>
            </div>

            <!-- 用户信息卡片 -->
            <section class="user-profile-section">
                <div class="user-profile-card">
                    <div class="user-banner">
                        <img src="images/user-banner.jpg" alt="用户横幅" class="banner-image">
                        <div class="user-avatar-wrapper">
                            <img src="../app/images/default-avatar.png" alt="用户头像" class="user-avatar"
                                id="userProfileAvatar">
                            <span class="guest-badge" id="guestBadge" style="display: none;">游客</span>
                        </div>
                    </div>

                    <div class="user-info">
                        <div class="user-name" id="userProfileName">用户名</div>
                        <div class="user-identity">
                            <span class="user-role" id="userRole">农户</span>
                            <span class="user-verified" id="userVerified">
                                <i class="fas fa-check-circle"></i> 已认证
                            </span>
                        </div>
                        <div class="user-stats">
                            <div class="user-stat-item">
                                <div class="stat-value" id="supplyCount">0</div>
                                <div class="stat-label">供应</div>
                            </div>
                            <div class="user-stat-item">
                                <div class="stat-value" id="demandCount">0</div>
                                <div class="stat-label">需求</div>
                            </div>
                            <div class="user-stat-item">
                                <div class="stat-value" id="favoriteCount">0</div>
                                <div class="stat-label">收藏</div>
                            </div>
                        </div>
                    </div>

                    <div class="user-profile-actions">
                        <button class="profile-action-btn" id="editProfileBtn">
                            <i class="fas fa-edit"></i>
                            编辑资料
                        </button>
                        <button class="profile-action-btn" id="settingsBtn">
                            <i class="fas fa-cog"></i>
                            账号设置
                        </button>
                        <button class="profile-action-btn logout-btn" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            退出登录
                        </button>
                    </div>
                </div>
            </section>

            <!-- 内容标签页切换 -->
            <section class="user-tab-section">
                <div class="tab-headers">
                    <div class="tab-header active" data-tab="myInfo">我的信息</div>
                    <div class="tab-header" data-tab="mySupply">我的供应</div>
                    <div class="tab-header" data-tab="myDemand">我的需求</div>
                    <div class="tab-header" data-tab="myFavorite">我的收藏</div>
                    <div class="tab-header" data-tab="myMessages">消息通知</div>
                </div>

                <div class="tab-content">
                    <!-- 我的信息 标签页 -->
                    <div class="tab-panel active" id="myInfoPanel">
                        <div class="panel-section">
                            <h3 class="panel-title">基本信息</h3>
                            <div class="info-form">
                                <div class="info-row">
                                    <div class="info-label">姓名</div>
                                    <div class="info-value" id="userRealName">--</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">手机号</div>
                                    <div class="info-value" id="userPhone">--</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">身份类型</div>
                                    <div class="info-value" id="userType">--</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">所在地区</div>
                                    <div class="info-value" id="userLocation">--</div>
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3 class="panel-title">认证信息</h3>
                            <div class="auth-status">
                                <div class="auth-status-icon verified">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="auth-status-text">
                                    <div class="auth-status-title">实名认证已完成</div>
                                    <div class="auth-status-desc">已完成身份验证，享受平台全部功能</div>
                                </div>
                                <div class="auth-status-action">
                                    <button class="status-action-btn">查看详情</button>
                                </div>
                            </div>

                            <div class="auth-status">
                                <div class="auth-status-icon pending">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="auth-status-text">
                                    <div class="auth-status-title">企业认证审核中</div>
                                    <div class="auth-status-desc">预计3个工作日内完成审核</div>
                                </div>
                                <div class="auth-status-action">
                                    <button class="status-action-btn">查看进度</button>
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3 class="panel-title">账号安全</h3>
                            <div class="security-items">
                                <div class="security-item">
                                    <div class="security-item-info">
                                        <div class="security-item-icon">
                                            <i class="fas fa-mobile-alt"></i>
                                        </div>
                                        <div class="security-item-text">
                                            <div class="security-item-title">手机绑定</div>
                                            <div class="security-item-desc">已绑定：138****1234</div>
                                        </div>
                                    </div>
                                    <button class="security-item-btn">修改</button>
                                </div>

                                <div class="security-item">
                                    <div class="security-item-info">
                                        <div class="security-item-icon">
                                            <i class="fas fa-lock"></i>
                                        </div>
                                        <div class="security-item-text">
                                            <div class="security-item-title">登录密码</div>
                                            <div class="security-item-desc">建议定期更换密码</div>
                                        </div>
                                    </div>
                                    <button class="security-item-btn">修改</button>
                                </div>

                                <div class="security-item">
                                    <div class="security-item-info">
                                        <div class="security-item-icon">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                        <div class="security-item-text">
                                            <div class="security-item-title">邮箱绑定</div>
                                            <div class="security-item-desc">未绑定</div>
                                        </div>
                                    </div>
                                    <button class="security-item-btn">绑定</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 我的供应 标签页 -->
                    <div class="tab-panel" id="mySupplyPanel">
                        <div class="panel-header">
                            <div class="panel-title">我发布的供应信息</div>
                            <a href="publish.html" class="panel-action-btn guest-limited">
                                <i class="fas fa-plus"></i>
                                发布新供应
                            </a>
                        </div>

                        <div class="status-filter">
                            <div class="status-option active">全部</div>
                            <div class="status-option">已上架</div>
                            <div class="status-option">已下架</div>
                            <div class="status-option">审核中</div>
                        </div>

                        <div class="empty-state" id="mySupplyEmptyState">
                            <img src="images/empty-state.svg" alt="暂无数据" class="empty-state-image">
                            <div class="empty-state-text">您还没有发布过供应信息</div>
                            <a href="publish.html" class="empty-state-action guest-limited">立即发布</a>
                        </div>

                        <div class="user-item-list" id="mySupplyList" style="display: none;">
                            <!-- 供应信息卡片1 -->
                            <div class="user-supply-card">
                                <div class="item-header">
                                    <div class="item-title">优质红富士苹果新鲜现摘</div>
                                    <div class="item-status on-sale">已上架</div>
                                </div>
                                <div class="item-content">
                                    <div class="item-image">
                                        <img src="https://img.freepik.com/free-photo/red-apple-with-green-leaves_1101-453.jpg"
                                            alt="苹果" loading="lazy">
                                    </div>
                                    <div class="item-details">
                                        <div class="item-info">
                                            <div class="item-info-row">
                                                <span class="info-label">价格：</span>
                                                <span class="info-value">6.5元/斤</span>
                                            </div>
                                            <div class="item-info-row">
                                                <span class="info-label">库存：</span>
                                                <span class="info-value">2000斤</span>
                                            </div>
                                            <div class="item-info-row">
                                                <span class="info-label">产地：</span>
                                                <span class="info-value">山东烟台</span>
                                            </div>
                                            <div class="item-info-row">
                                                <span class="info-label">发布时间：</span>
                                                <span class="info-value">2023-06-15</span>
                                            </div>
                                            <div class="item-info-row">
                                                <span class="info-label">浏览量：</span>
                                                <span class="info-value">256</span>
                                            </div>
                                        </div>
                                        <div class="item-actions">
                                            <button class="item-action-btn primary guest-limited">编辑</button>
                                            <button class="item-action-btn secondary guest-limited">刷新</button>
                                            <button class="item-action-btn danger guest-limited">下架</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 供应信息卡片2 -->
                            <div class="user-supply-card">
                                <div class="item-header">
                                    <div class="item-title">有机蔬菜套餐 当季新鲜蔬菜</div>
                                    <div class="item-status pending">审核中</div>
                                </div>
                                <div class="item-content">
                                    <div class="item-image">
                                        <img src="https://img.freepik.com/free-photo/various-fresh-vegetables_1101-616.jpg"
                                            alt="蔬菜" loading="lazy">
                                    </div>
                                    <div class="item-details">
                                        <div class="item-info">
                                            <div class="item-info-row">
                                                <span class="info-label">价格：</span>
                                                <span class="info-value">98元/箱</span>
                                            </div>
                                            <div class="item-info-row">
                                                <span class="info-label">库存：</span>
                                                <span class="info-value">200箱</span>
                                            </div>
                                            <div class="item-info-row">
                                                <span class="info-label">产地：</span>
                                                <span class="info-value">江苏南京</span>
                                            </div>
                                            <div class="item-info-row">
                                                <span class="info-label">发布时间：</span>
                                                <span class="info-value">2023-06-18</span>
                                            </div>
                                            <div class="item-info-row">
                                                <span class="info-label">浏览量：</span>
                                                <span class="info-value">82</span>
                                            </div>
                                        </div>
                                        <div class="item-actions">
                                            <button class="item-action-btn primary guest-limited">查看详情</button>
                                            <button class="item-action-btn danger guest-limited">撤回</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 我的需求 标签页 -->
                    <div class="tab-panel" id="myDemandPanel">
                        <div class="panel-header">
                            <div class="panel-title">我发布的需求信息</div>
                            <a href="publish.html" class="panel-action-btn guest-limited">
                                <i class="fas fa-plus"></i>
                                发布新需求
                            </a>
                        </div>

                        <div class="status-filter">
                            <div class="status-option active">全部</div>
                            <div class="status-option">进行中</div>
                            <div class="status-option">已截止</div>
                            <div class="status-option">已完成</div>
                        </div>

                        <div class="empty-state" id="myDemandEmptyState">
                            <img src="images/empty-state.svg" alt="暂无数据" class="empty-state-image">
                            <div class="empty-state-text">您还没有发布过需求信息</div>
                            <a href="publish.html" class="empty-state-action guest-limited">立即发布</a>
                        </div>

                        <div class="user-item-list" id="myDemandList" style="display: none;">
                            <!-- 这里将会显示需求列表，结构类似于供应列表 -->
                        </div>
                    </div>

                    <!-- 我的收藏 标签页 -->
                    <div class="tab-panel" id="myFavoritePanel">
                        <div class="panel-header">
                            <div class="panel-title">我的收藏</div>
                            <div class="panel-tabs">
                                <div class="panel-tab active">供应</div>
                                <div class="panel-tab">需求</div>
                            </div>
                        </div>

                        <div class="empty-state active" id="myFavoriteEmptyState">
                            <img src="images/empty-state.svg" alt="暂无数据" class="empty-state-image">
                            <div class="empty-state-text">您还没有收藏任何信息</div>
                            <a href="supply.html" class="empty-state-action">去逛逛</a>
                        </div>

                        <div class="favorite-list" id="myFavoriteList" style="display: none;">
                            <!-- 收藏列表将在这里显示 -->
                        </div>
                    </div>

                    <!-- 消息通知 标签页 -->
                    <div class="tab-panel" id="myMessagesPanel">
                        <div class="panel-header">
                            <div class="panel-title">消息通知</div>
                            <div class="panel-tabs">
                                <div class="panel-tab active">系统通知</div>
                                <div class="panel-tab">私信</div>
                            </div>
                        </div>

                        <div class="message-list">
                            <div class="message-item">
                                <div class="message-icon system">
                                    <i class="fas fa-bell"></i>
                                </div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <div class="message-title">系统通知</div>
                                        <div class="message-time">2023-06-20 14:23</div>
                                    </div>
                                    <div class="message-body">您的供应信息"有机蔬菜套餐 当季新鲜蔬菜"已通过审核并上架。</div>
                                </div>
                            </div>

                            <div class="message-item unread">
                                <div class="message-icon system">
                                    <i class="fas fa-bell"></i>
                                </div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <div class="message-title">系统通知</div>
                                        <div class="message-time">2023-06-18 09:45</div>
                                    </div>
                                    <div class="message-body">欢迎使用农产品供销信息平台，请完善您的个人信息，以便享受更多功能。</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 底部导航栏 -->
    <nav class="bottom-navbar">
        <div class="nav-items">
            <a href="index.html" class="nav-item" data-page="home">
                <i class="fas fa-home"></i>
                <span>首页</span>
            </a>
            <a href="supply.html" class="nav-item" data-page="supply">
                <i class="fas fa-shopping-basket"></i>
                <span>供应大厅</span>
            </a>
            <a href="publish.html" class="nav-item nav-publish">
                <div class="publish-btn">
                    <i class="fas fa-plus"></i>
                </div>
                <span>发布</span>
            </a>
            <a href="demand.html" class="nav-item" data-page="demand">
                <i class="fas fa-clipboard-list"></i>
                <span>需求大厅</span>
            </a>
            <a href="user.html" class="nav-item active" data-page="user">
                <i class="fas fa-user"></i>
                <span>个人中心</span>
            </a>
        </div>
    </nav>

    <!-- 引入主JavaScript文件 -->
    <script src="../app/js/main.js"></script>
    <!-- 引入应用程序交互脚本 -->
    <script src="../app/js/app.js"></script>
    <!-- 引入Web端特有脚本 -->
    <script src="js/web-app.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 检查登录状态
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            if (!isLoggedIn) {
                window.location.href = 'login.html?redirect=user.html';
                return;
            }

            // 检查游客模式
            const isGuest = localStorage.getItem('isGuest') === 'true';
            if (isGuest) {
                updateUIForGuest();
            }

            // 更新用户信息
            const userName = localStorage.getItem('userName') || '用户名';
            document.getElementById('userProfileName').textContent = userName;

            // 标签页切换
            const tabHeaders = document.querySelectorAll('.tab-header');
            const tabPanels = document.querySelectorAll('.tab-panel');

            tabHeaders.forEach(header => {
                header.addEventListener('click', function () {
                    // 移除所有标签页的active类
                    tabHeaders.forEach(h => h.classList.remove('active'));
                    tabPanels.forEach(p => p.classList.remove('active'));

                    // 添加当前标签页的active类
                    this.classList.add('active');

                    // 获取对应面板ID并激活
                    const tabName = this.getAttribute('data-tab');
                    const panel = document.getElementById(tabName + 'Panel');
                    if (panel) {
                        panel.classList.add('active');
                    }
                });
            });

            // 模拟数据加载
            setTimeout(() => {
                if (!isGuest) {
                    // 如果不是游客，显示示例数据
                    document.getElementById('mySupplyEmptyState').style.display = 'none';
                    document.getElementById('mySupplyList').style.display = 'block';

                    // 更新统计数据
                    document.getElementById('supplyCount').textContent = '2';
                    document.getElementById('demandCount').textContent = '1';
                    document.getElementById('favoriteCount').textContent = '3';

                    // 更新用户真实信息
                    document.getElementById('userRealName').textContent = '张三';
                    document.getElementById('userPhone').textContent = '138****1234';
                    document.getElementById('userType').textContent = '农户';
                    document.getElementById('userLocation').textContent = '山东省烟台市';
                }
            }, 500);

            // 退出登录按钮点击事件
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function () {
                    // 清除登录状态
                    localStorage.removeItem('isLoggedIn');
                    localStorage.removeItem('isGuest');
                    localStorage.removeItem('userName');

                    // 重定向到登录页
                    window.location.href = 'login.html';
                });
            }

            // 处理受限功能点击
            document.querySelectorAll('.guest-limited').forEach(element => {
                element.addEventListener('click', function (e) {
                    if (isGuest) {
                        e.preventDefault();
                        alert('游客模式下此功能受限，请注册登录后使用');
                    }
                });
            });

            function updateUIForGuest() {
                // 显示游客提示条
                document.getElementById('guestNotice').style.display = 'flex';

                // 显示游客标识
                document.getElementById('guestBadge').style.display = 'block';

                // 隐藏认证标识
                document.getElementById('userVerified').style.display = 'none';

                // 更新用户角色
                document.getElementById('userRole').textContent = '游客';

                // 游客模式下的统计数据为0
                document.getElementById('supplyCount').textContent = '0';
                document.getElementById('demandCount').textContent = '0';
                document.getElementById('favoriteCount').textContent = '0';

                // 更新游客信息
                document.getElementById('userRealName').textContent = '--';
                document.getElementById('userPhone').textContent = '--';
                document.getElementById('userType').textContent = '游客';
                document.getElementById('userLocation').textContent = '--';
            }
        });
    </script>
</body>

</html>